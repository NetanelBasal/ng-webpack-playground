#!/usr/bin/env node
const fs=require("fs"),{buildTranslationFiles:buildTranslationFiles}=require("./keysBuilder"),{findMissingKeys:findMissingKeys}=require("./keysDetective"),{toCamelCase:toCamelCase,mergeDeep:mergeDeep}=require("./helpers"),path=require("path"),ACTIONS={EXTRACT:"--extract",FIND_MISSING:"--find-missing"},[action,...argv]=process.argv.slice(2),pkgDir=require("pkg-dir"),argvMap=argv.reduce((e,i,a,s)=>{if(i.includes("--")){const r=toCamelCase(i.replace("--","")),n=void 0===s[a+1]||s[a+1].includes("--");e[r]=!!n||s[a+1]}return e},{}),basePath=path.resolve(process.cwd()),pkgFile=pkgDir.sync(),packageConfig=fs.readFileSync(`${pkgFile}/package.json`,{encoding:"UTF-8"}),cliConfig=mergeDeep({extract:{},find:{}},JSON.parse(packageConfig)["transloco-keys-manager"]||{},{[action.replace("--","")]:argvMap});switch(action){case ACTIONS.EXTRACT:buildTranslationFiles({config:cliConfig.extract,basePath:basePath});break;case ACTIONS.FIND_MISSING:findMissingKeys({config:cliConfig.find,basePath:basePath});break;default:console.log("No action was passed... quiting")}
